<header class="app-header" (click)="closeDropdown()">
  <!-- Burger (Sidebar) -->
  <button class="icon-btn burger" aria-label="MenÃ¼" (click)="toggleSidebar($event)">
    <mat-icon fontSet="material-icons-outlined">menu</mat-icon>
  </button>

  <!-- Titel, optisch zentriert -->
  <h2 class="title">{{ pageTitle }}</h2>

  <!-- Actions rechts -->
  <div class="header-actions" (click)="$event.stopPropagation()">
    <!-- Online-Indicator (optional) -->
    <button class="icon-btn icon-btn--lg" aria-label="Einstellungen" (click)="openSettings($event)">
      <mat-icon class="material-icons-outlined">settings</mat-icon>
    </button>

    <!-- Glocke + Badge + Dropdown -->
    <div class="bell-wrap">
      <button class="icon-btn" aria-label="Benachrichtigungen" (click)="toggleNotifications($event)">
        <mat-icon fontSet="material-icons-outlined">notifications_none</mat-icon>
        <span class="badge" *ngIf="(unreadCount$ | async) as c" [class.show]="c>0">{{ c }}</span>
      </button>

      <div class="dropdown" *ngIf="showNotifications">
        <ng-container *ngIf="(notifications$ | async) as list">
          <div class="item empty" *ngIf="!list?.length">Keine Benachrichtigungen.</div>
          <div class="item" *ngFor="let n of list" [class.read]="n.read" (click)="markRead(n.id)">
            <p>{{ n.message }}</p>
            <small>{{ asDate(n.timestamp) | date:'EEE, dd.MM.yyyy, HH:mm' }}</small>
          </div>
        </ng-container>
      </div>
    </div>

    <!-- Username -->
    <span class="user-name">{{ userDisplayName }}</span>
  </div>
</header>

<app-app-sidenav
  [open]="showSidebar"
  (closed)="showSidebar=false"
  (logout)="logout()">
</app-app-sidenav>