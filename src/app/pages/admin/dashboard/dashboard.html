<h3>Admin Dashboard</h3>
<div>
<mat-card class="actions">
  <div class="quick">
    @for (q of quick; track q.text) {
      <a mat-stroked-button [routerLink]="q.link" [queryParams]="q.queryParams ?? null">
        <mat-icon>{{ q.icon }}</mat-icon>
        {{ q.text }}
      </a>
    }
  </div>
</mat-card>
</div>

<div class="grid">
  @for (k of (kpis$ | async) ?? []; track k.label) {
    <mat-card class="kpi" [routerLink]="k.link">
      <div class="kpi-row">
        <span class="kpi-icon">
          <mat-icon>{{ k.icon }}</mat-icon>
        </span>

        <div class="kpi-values">
          <div class="val">{{ k.value }}</div>
          <div class="lbl">{{ k.label }}</div>
        </div>
      </div>
    </mat-card>
  }
</div>

<!-- ... dein bestehendes KPI Grid + Schnellaktionen ... -->

<div class="widgets">
  <mat-card class="widget">
    <div class="widget-head">
      <h3>Inbox</h3>
      <span></span>
    </div>

    @for (t of (inbox$ | async) ?? []; track t.title) {
      <div class="row" [routerLink]="t.link">
        <div>
          <div class="title">{{ t.title }}</div>
          <div class="meta">{{ t.meta }}</div>
        </div>
        <div class="pill">{{ t.count }}</div>
      </div>
    }
  </mat-card>

  <mat-card class="widget">
    <div class="widget-head">
      <h3>Neueste Reports</h3>
      <a mat-button routerLink="/admin/reports">Alle</a>
    </div>

    @for (r of (recentReports$ | async) ?? []; track r.id) {
      <div class="row" [routerLink]="r.link">
        <div>
          <div class="title">{{ r.title }}</div>
          <div class="meta">{{ r.when }} · {{ r.status }}</div>
        </div>
      </div>
    }
  </mat-card>

  <mat-card class="widget">
    <div class="widget-head">
      <h3>Letzte Aktivitäten</h3>
    </div>

    @for (a of (activity$ | async) ?? []; track a.id) {
      <div class="row">
        <mat-icon class="row-icon">{{ a.icon }}</mat-icon>
        <div class="row-main">
          <div class="title">{{ a.title }}</div>
          <div class="meta" *ngIf="a.detail">{{ a.detail }}</div>
        </div>
        <div class="row-when">{{ a.when }}</div>
      </div>
    }
  </mat-card>
</div>

