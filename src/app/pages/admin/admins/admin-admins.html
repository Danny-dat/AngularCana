<div class="page">
  <div class="head">
    <div>
      <h2>Admins</h2>
      <p class="hint">Owner kann Admins hinzufügen/entfernen. Admins sehen den Admin-Bereich.</p>
    </div>

    <button mat-flat-button color="primary" (click)="addAdmin()">
      <mat-icon>person_add</mat-icon>
      Admin hinzufügen
    </button>
  </div>

  <div class="grid">
    @if (rows$ | async; as rows) {
      @if (rows.length === 0) {
        <mat-card class="card">
          <p class="hint">Noch keine Admin-Einträge.</p>
        </mat-card>
      } @else {
        @for (r of rows; track r.uid) {
          <mat-card class="card admin">
            <div class="row">
              <div class="left">
                <div class="uid">
                  <mat-icon>admin_panel_settings</mat-icon>
                  <code>{{ r.uid }}</code>
                </div>
                <div class="meta">
                  @if (r.isOwner) {
                    <span class="badge owner">OWNER</span>
                  } @else {
                    <span class="badge admin">ADMIN</span>
                  }
                  @if (r.note) {
                    <span class="note">· {{ r.note }}</span>
                  }
                </div>
              </div>

              <div class="actions">
                <button mat-stroked-button color="warn"
                        [disabled]="r.isOwner"
                        (click)="removeAdmin(r.uid)">
                  <mat-icon>person_remove</mat-icon>
                  Entfernen
                </button>
              </div>
            </div>
          </mat-card>
        }
      }
    }
  </div>
</div>
