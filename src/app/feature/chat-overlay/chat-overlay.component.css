/* Enterprise / Theme-aware chat overlay (Global + Privat) */

.overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, .45);
  display: grid;
  place-items: center;
  z-index: 1000;
}

.window {
  width: min(860px, 96vw);
  height: min(74vh, 680px);
  background: var(--surface-color);
  color: var(--text-color);
  border-radius: var(--border-radius);
  border: 1px solid var(--border-color);
  display: grid;
  grid-template-rows: auto 1fr auto;
  box-shadow: var(--shadow-e2);
  overflow: hidden;
}

header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-color);
}

header h3 {
  margin: 0;
  font-size: 1.05rem;
}

.x {
  font-size: 24px;
  line-height: 1;
  background: transparent;
  border: none;
  cursor: pointer;
  color: var(--text-muted-color);
}
.x:hover {
  color: var(--text-color);
}

.messages {
  padding: 12px;
  overflow: auto;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.bubble {
  max-width: 78%;
  padding: 9px 12px;
  border-radius: 14px;
  background: color-mix(in srgb, var(--surface-2) 92%, transparent);
  border: 1px solid color-mix(in srgb, var(--border-color) 70%, transparent);
}

.bubble p {
  margin: 0;
  color: var(--text-color);
  word-break: break-word;
}

.bubble.sent {
  align-self: flex-end;
  background: color-mix(in srgb, var(--accent) 14%, var(--surface-2));
  border-color: color-mix(in srgb, var(--accent) 22%, var(--border-color));
}

/* Eingabe (nur Footer-Leiste, NICHT Report-Textarea) */
.window > .input {
  display: flex;
  gap: 8px;
  border-top: 1px solid var(--border-color);
  padding: 10px;
  background: color-mix(in srgb, var(--surface-color) 88%, transparent);
}

.window > .input input {
  flex: 1;
  padding: 10px 12px;
  border: 1px solid var(--border-color);
  border-radius: 12px;
  background: var(--surface-2);
  color: var(--text-color);
}

.window > .input button {
  border-radius: 12px;
  border: 1px solid var(--border-color);
  background: color-mix(in srgb, var(--surface-2) 92%, transparent);
  padding: 8px 12px;
  color: var(--text-color);
}

.window > .input button:hover {
  background: color-mix(in srgb, var(--surface-2) 84%, transparent);
}

/* Kopfzeile in Bubble */
.meta-row { display: flex; align-items: center; justify-content: space-between; gap: .5rem; margin-bottom: .25rem; }
.bubble small.from { display: block; opacity: .75; }
.bubble small.from.me { opacity: .95; }
.bubble small.from .time { opacity: .7; }

/* Icon-Aktionen rechts */
.bubble .actions { display: inline-flex; align-items: center; gap: .25rem; opacity: 0; transition: opacity .15s ease; }
.bubble:hover .actions { opacity: 1; }

.icon { appearance: none; border: none; background: transparent; padding: .25rem; border-radius: .5rem; cursor: pointer; color: var(--text-muted-color); }
.icon:hover { background: color-mix(in srgb, var(--text-color) 6%, transparent); color: var(--text-color); }
.icon.danger:hover { background: color-mix(in srgb, var(--error-color) 10%, transparent); }
.icon svg { width: 16px; height: 16px; stroke: currentColor; fill: none; }
.icon.danger { color: var(--error-color); }

.report-body { padding: 12px; color: var(--text-color); }
.report-body .muted { color: var(--text-muted-color); }
.report-label { display:block; font-size:12px; color: var(--text-muted-color); margin: 6px 0; }

.report-body .select,
.report-body textarea.input {
  width: 100%;
  box-sizing: border-box;
  padding: 10px 12px;
  border: 1px solid var(--border-color);
  border-radius: 12px;
  background: var(--surface-2);
  color: var(--text-color);
}

.report-body textarea.input {
  resize: vertical;
  min-height: 88px;
}
.report-actions { display:flex; justify-content:flex-end; gap:8px; margin-top: 12px; }
.report-error { margin-top: 8px; color:#d32f2f; font-size:12px; }

@media (max-width: 560px) {
  .window {
    width: 100vw;
    height: 100dvh;
    border-radius: 0;
  }
}